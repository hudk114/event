!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):t.event=o()}(this,function(){"use strict";function t(t){this.pool={},this.compare=t}function o(t,o){this.cb=t,this.once=o,this.done=!1}var n=function(t){return"function"==typeof t};return t.prototype={constructor:t,setCompare:function(t){this.compare=t},_getPool:function(t){var o="function"==typeof this.compare?this.compare:function(t,o){return t===o};for(var n in this.pool)if(this.pool.hasOwnProperty(n)&&o(n,t))return this.pool[n];return this.pool[t]||(this.pool[t]={stop:!0,list:[]}),this.pool[t]},_createPool:function(t){return this._getPool(t)||(this.pool[t]={stop:!0,list:[]}),this._getPool(t)},on:function(t,i,e){if(n(i)){var r=new o(i.bind(e),!1);return this._createPool(t).list.push(r),r}},once:function(t,i,e){if(n(i)){var r=new o(i.bind(e),!0);return this._createPool(t).list.push(r),r}},trigger:function(t,o){var n=this._getPool(t),i=null;if(n){for(var e in n.stop=!1,n.list){if(i=n.list[e],n.stop)return;i.once&&i.done||i.cb(o),i.once&&(i.done=!0)}n.list=n.list.filter(function(t){return!t.once||!t.done}),n.stop=!0}},stop:function(t){var o=this._getPool(t);o&&(o.stop=!0)},remove:function(t,o){var n=this._getPool(t).list.findIndex(function(t){return t===o});if(n<0)return null;this._getPool(t).list.splice(n,1)},removeAll:function(t){var o=this._getPool(t);o&&(o.list=[])}},t});
