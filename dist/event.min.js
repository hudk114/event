!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):t.event=o()}(this,function(){"use strict";function t(){this.pool={}}function o(t,o){this.cb=t,this.once=o,this.done=!1}var n=function(t){return"function"==typeof t};return t.prototype={constructor:t,_getPool:function(t){return this.pool[t]||(this.pool[t]={stop:!0,list:[]}),this.pool[t]},on:function(t,i,e){if(n(i))return this._getPool(t).list.push(new o(i.bind(e),!1)),this},once:function(t,i,e){if(n(i))return this._getPool(t).list.push(new o(i.bind(e),!0)),this},trigger:function(t,o){var n=this.pool[t],i=null;if(n){for(var e in n.stop=!1,n.list){if(i=n.list[e],n.stop)return;i.once&&i.done||i.cb(o),i.once&&(i.done=!0)}n.list=n.list.filter(function(t){return!t.once||!t.done}),n.stop=!0}},stop:function(t){var o=this.pool[t];o&&(o.stop=!0)}},t});
